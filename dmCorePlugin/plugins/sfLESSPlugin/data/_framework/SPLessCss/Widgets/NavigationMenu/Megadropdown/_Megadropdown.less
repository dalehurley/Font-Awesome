// _Megadropdown.less
// v1.1
// Last Updated : 2012-02-22 16:55
// Copyright : SID Presse
// Author : Arnaud GAUDIN

ul.megadropdown {
	position: relative;
	z-index: 597;
	float: left;

	//test affichage pour stylage
	//& > li:nth-child(6) {
	//	ul, ul ul { visibility: visible !important; }
	//}

	//Au cas où : suppression marges et listes à puce
	&, & ul, & li { list-style: none; margin: 0; padding: 0; }
	
	//niveau 0
	li {
		float: left;
		line-height: @gridBaseline;
		vertical-align: middle;
		zoom: 1;
		
		//positionnement des liens (toujours ciblé par cette classe)
		.link { position: relative; display:block; }
		
		&.hover, &:hover {
			z-index: 599;
			cursor: default;
			left: 0;
		}
	}
	
	//gestion de l'affichage direct du premier niveau
	& > li.dm_dir {
		& > ul {
			visibility: hidden;
		}
		&.hover > ul, &:hover > ul {
			visibility: visible;
		}
	}
	
	//niveau 1 et +
	ul {
		position: absolute;
		top: 100%;
		left: 0;
		z-index: 598;
		//permet d'éviter les débordements de texte inopinés
		overflow: hidden;
		
		//affectation de la pleine largeur au premier sous-niveau
		@gridSiteWidth();
		
		ul {
			position: relative;
			top: 0;
			left: 0;
		}
		//on force également la taille du lien de titrage pour éviter les débordements
		ul, li.dm_dir .link { @gridWidth(2); }
		
		li {
			position: relative;
			float: none;
			//pour les liens de niveau 1 non situé dans un dossier
			@gridWidth(3; @gridGutter);
			.isLess & { background-color: red; }
			
			//largeur automatique pour les suivants
			li{ width: auto; }
			
			&.dm_dir {
				float: left;
				width: auto;
				
				&.last, &.lastOfRow {
					//border-right: 0;
					//@gridWidth(2);
				}
				
				//gestion des sous-niveau supérieur à 2
				ul li.dm_dir {
					width: auto;
					border-right: 0;
				}
			}
		}
	}
}