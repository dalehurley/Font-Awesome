// _Wrappers.less
// v1.3
// Last Updated : 2012-03-28 17:40
// Copyright : SID Presse
// Author : Arnaud GAUDIN

//configuration des styles de base des différents containers pouvant servir à la mise en page du site

//affection d'un style block à tous les containers
.contentWrapper, .navigationWrapper, .fileWrapper, .supWrapper, .wrapper, .subWrapper, .imageFullWrapper, .imageWrapper, .imageGallery, .link_box, .elements, .element { position: relative; display: block; }

//container utilisé pour contenir tout le contenu d'une publication
.contentWrapper {
}

//container utilisé pour contenir les éléments de navigation de la page ou du widget
.navigationWrapper {
	.isLess & { background-color: fadeout(#FCD80A, 50%); }
	clear: both;
	//dans un listing ou un résultat de recherche
	.elements .element &, .search_results .search_result & { margin: 0; }
}
.navigationTop { margin-bottom: @gridBaseline; }
.navigationBottom { margin-top: @gridBaseline; }

//pager (numéroration des pages)
.pager {
	ul {
		.isLess & { background-color: #BCB5E6; }

		position: relative;
		//suppression de toute marge et puce
		margin: 0;
		padding: 0;
		list-style: none;
		text-align: center;

		.page {
			.isLess & { background-color: #DDC1DE; }

			//placement du lien
			.link { }

			//cf : http://css-tricks.com/snippets/css/cross-browser-inline-block
			display: -moz-inline-stack;
			display: inline-block;
			vertical-align: top;
			zoom: 1;
			line-height: @gridBaseline;
			//correction sous IE
			.ie6 &, .ie7 & { display: inline; }

			// &.current { }
			// &.prev { }
			// &.next { }
			// &.first { }
			// &.last { }
		}
	}

}

//container utitlisé pour contenir les fichiers liés à un article
.fileWrapper {
	.isLess & { background-color: #919EBA; }
}

//container situés directement dans un widget en enblobant plusieurs sous-contenus
.supWrapper {
	.isLess & { background-color: fadeout(#D9E8A5, 90%); }
	& > .title {
		.isLess & { background-color: fadeout(#B7D450, 90%); }
		margin-bottom: @gridBaseline;
	}
	article & {
		.isLess & { background-color: #A8B382; }
	}
}

//container de texte, on ne met les éléments en block que lorsqu'il sont contenu dedans
.wrapper {
	.isLess & { background-color: fadeout(#95AEBD, 90%); }
}

//container situé dans un sous élément (par exemple un listing)
.subWrapper {
	.isLess & { background-color: fadeout(#E432ED, 90%); }
	
	//dans un listing ou un résultat de recherche
	.elements .element &, .search_results .search_result & {
		line-height: @gridBaseline;
		//on modifie le comportement des éléments dans un subWrapper
		//cf http://blog.mozilla.com/webdev/2009/02/20/cross-browser-inline-block/ pour hack vertical-align
		#dm_page_content & span { display: inline; vertical-align: top; }
	}
}

//container de l'image en pleine largeur (utilisé dans l'affichage d'un article)
.imageFullWrapper {
	.isLess & {
		background-color: #B550A9;
		.image { background-color: #6150B5; }
	}
	//masquage débordements
	overflow: hidden;
	margin-bottom: @gridBaseline;
}

//configuration de base des deux containers d'images
.imageWrapper, .imageGallery {
	@getClearfix();
	//masquage débordements
	overflow: hidden;

	//par défaut placé à droite dans tous les contenus
	float: right;
	//placé à gauche dans les sidebars et dans les subwrappers
	#dm_sidebar_left &, #dm_sidebar_right &, .supWrapper & { float: left; }
	//image et liens d'image par défaut en block
	.image, .link { display: block; }
}

//container de l'image
.imageWrapper {
	.isLess & {
		background-color: fadeout(#B550A9, 50%);
		.image { background-color: fadeout(#6150B5, 50%); }
	}

	//container d'une seule image n'ayant pas de marge
	//donc marge externe de placement

	//par défaut placé à droite dans tous les contenus, donc marge à gauche et aucune à droite
	margin: 0 0 @gridBaseline @gridGutter;

	//dans un listing ou un résultat de recherche
	.elements .element &, .search_results .search_result & { margin-bottom: 0; }

	//insertion de la sprite de silhouette en cas d'absence d'image dans les parties équipes
	&.noImage.buddy {
		//suppression dépassement éventuel de la sprite
		overflow: hidden;

		.image {
			position: absolute;
			display: block;
			text-indent:-9999em;
			//placement à mi-largeur
			left: 50%;
			bottom: 0;
		}
		
		//configuration en fonction du format de sprite sélectionné
		&.spriteFormat_S {
			height: @spriteFormat_S;
			padding-top: (@gridBaseline - @spriteFormat_S);
			.image {
				margin-left: @spriteFormat_S/-2;
				@spriteDimension(@spriteFormat_S);
				@spriteBgi("Default"; "S");
				//insertion des sprites
				&.female {
					@spriteBgiSvg("Default"; "internet"; "buddyFemale");
					@spriteBgp(@spriteFormat_S; @spriteOffX-internet-buddyFemale; @spriteOffY-internet-buddyFemale);
				}
				&.male {
					@spriteBgiSvg("Default"; "internet"; "buddyMale");
					@spriteBgp(@spriteFormat_S; @spriteOffX-internet-buddyMale; @spriteOffY-internet-buddyMale);
				}
			}
		}

		&.spriteFormat_M {
			height: @spriteFormat_M;
			padding-top: (@gridBaseline*2 - @spriteFormat_M);
			.image {
				margin-left: @spriteFormat_M/-2;
				@spriteDimension(@spriteFormat_M);
				@spriteBgi("Default"; "M");
				//insertion des sprites
				&.female {
					@spriteBgiSvg("Default"; "internet"; "buddyFemale");
					@spriteBgp(@spriteFormat_M; @spriteOffX-internet-buddyFemale; @spriteOffY-internet-buddyFemale);
				}
				&.male {
					@spriteBgiSvg("Default"; "internet"; "buddyMale");
					@spriteBgp(@spriteFormat_M; @spriteOffX-internet-buddyMale; @spriteOffY-internet-buddyMale);
				}
			}
		}

		&.spriteFormat_L {
			height: @spriteFormat_L;
			padding-top: (@gridBaseline*4 - @spriteFormat_L);
			.image {
				margin-left: @spriteFormat_L/-2;
				@spriteDimension(@spriteFormat_L);
				@spriteBgi("Default"; "L");
				//insertion des sprites
				&.female {
					@spriteBgiSvg("Default"; "internet"; "buddyFemale");
					@spriteBgp(@spriteFormat_L; @spriteOffX-internet-buddyFemale; @spriteOffY-internet-buddyFemale);
				}
				&.male {
					@spriteBgiSvg("Default"; "internet"; "buddyMale");
					@spriteBgp(@spriteFormat_L; @spriteOffX-internet-buddyMale; @spriteOffY-internet-buddyMale);
				}
			}
		}

		&.spriteFormat_X {
			height: @spriteFormat_X;
			padding-top: (@gridBaseline*8 - @spriteFormat_X);
			.image {
				margin-left: @spriteFormat_X/-2;
				@spriteDimension(@spriteFormat_X);
				@spriteBgi("Default"; "X");
				//insertion des sprites
				&.female {
					@spriteBgiSvg("Default"; "internet"; "buddyFemale");
					@spriteBgp(@spriteFormat_X; @spriteOffX-internet-buddyFemale; @spriteOffY-internet-buddyFemale);
				}
				&.male {
					@spriteBgiSvg("Default"; "internet"; "buddyMale");
					@spriteBgp(@spriteFormat_X; @spriteOffX-internet-buddyMale; @spriteOffY-internet-buddyMale);
				}
			}
		}
	}

	//placé à gauche dans les sidebars et dans les subwrappers, donc marge à droite et aucune marge à gauche
	#dm_sidebar_left &, #dm_sidebar_right &, .supWrapper & {
		margin-left: 0;
		margin-right: @gridGutter;
	}
}

//container d'une galerie (à tester et débuggué lorsque implémenté dans le système)
.imageGallery {
	.isLess & { background-color: fadeout(#1678B5, 50%); }

	//container de plusieurs images ayants des marges
	//donc pas de marge externe
	margin: 0;

	//par défaut placé à droite dans tous les contenus, donc miniatures alignées en float
	.image, .link {
		float: left;
		margin: 0 0 @gridBaseline @gridGutter;
		//suppression marges dans listings et dans dernier élément
		// &.last { margin-left: 0; }
		//dans un listing ou un résultat de recherche
		.elements .element &, .search_results .search_result & { margin-bottom: 0; }
	}
	.link .image { float:none; margin: 0; }

	//placé à gauche dans les sidebars et dans les subwrappers, donc changement sens d'alignement
	#dm_sidebar_left &, #dm_sidebar_right &, .supWrapper & {
		.image, .link {
			margin-right: @gridGutter;
			margin-left: 0;
			&.last { margin-right: 0; }
		}
	}
}

//liens englobants en boite
.link_box {
	.isLess & { background-color: #9370DB; }
	//force l'agrandissement en cas de présence de contenu flottant
	@getClearfix();
	outline: 0;
	text-decoration: none;
	&:hover { text-decoration: underline; }
	
	//dans un listing ou un résultat de recherche
	.elements .element &, .search_results .search_result & {
		//suppression soulignement des liens englobants en boite
		&, &:hover { text-decoration: none; }
	}
}

//listings d'éléments diverses (article, personnes, organisations, etc)
.elements {
	.isLess & { background-color: fadeout(#999, 75%); }
	//suppression de toute marge et puce
	margin: 0;
	padding: 0;
	list-style: none;
	
	.element {
		.isLess & { background-color: fadeout(#bbb, 75%); }
		//force l'agrandissement en cas de présence de contenu flottant
		@getClearfix();
	}
}

//résultats de recherche
.search_results {
	.isLess & { background-color: fadeout(#999, 75%); }
	//suppression de toute marge
	margin: 0;

	//lorsque les pseudo éléments sont gérés on replace différemment la numérotation
	.generatedcontent & {

	}

	.search_result {
		.isLess & { background-color: fadeout(#bbb, 75%); }
		//on force l'agrandissement en cas de présence de contenu flottant
		@getClearfixDebugBefore();

		&:before {
			.isLess & { background-color: fadeout(#D66969, 25%); }
			display: block;
			float: left;
		}

		//probabilité de correspondance
		.score {
			.isLess & { background-color: fadeout(#97B3E6, 25%); }
			display: block;
			float: left;
		}

		//lien vers la page
		.link {
			//nom de la page
			// .page_name { }

			//description de la page
			// .page_desc { }
		}
	}
}