// _WidgetsBase.less
// v1.0
// Last Updated : 2011-09-14 15:10
// Copyright : SID Presse
// Author : Arnaud GAUDIN

//Ce fichier permet d'initialiser un style par défaut pour tous les widgets et n'est inclu qu'une seule fois dans le template

//EN ATTENDANT OPTIMISATION GÉNÉRALE DU FRAMEWORK : inclusion des widgets ne nécessitant pas d'appels médias séparés
@import "_templates/copilotesTheme/Widgets/ActusDuCabinetActuArticlesContextuel/_ActusDuCabinetActuArticlesContextuel.less";
@import "_templates/copilotesTheme/Widgets/EquipeCabinetEquipesContextuel/_EquipeCabinetEquipesContextuel.less";
@import "_templates/copilotesTheme/Widgets/MissionsMissionsContextuel/_MissionsMissionsContextuel.less";
@import "_templates/copilotesTheme/Widgets/SpecifiquesBaseEditorialeArticlesBySectionContextuel/_SpecifiquesBaseEditorialeArticlesBySectionContextuel.less";
@import "_templates/copilotesTheme/Widgets/SpecifiquesBaseEditorialeFilActualite/_SpecifiquesBaseEditorialeFilActualite.less";
@import "_templates/copilotesTheme/Widgets/SpecifiquesBaseEditorialeListAgenda/_SpecifiquesBaseEditorialeListAgenda.less";

//import du widget spécifique temporaire pour Copilotes
@import "_templates/copilotesTheme/Widgets/CopilotesTagcloud/_CopilotesTagcloud.less";

//couleurs de débug dans les zones de contenu uniquement
.isLess {
	#dm_sidebar_left, #dm_sidebar_right, #dm_page_content {
		.dm_widget {
			background-color: fadeout(#ADA1E6, 25%);
			.dm_widget_inner { background-color: fadeout(#8C7FE6, 25%); }
		}
	}
}

//STYLAGE GÉNÉRAL DES WIDGETS DANS LES ZONES DU SITE
.dm_widget {
	.dm_widget_inner {
		//changement taille du titre des widgets
		& > .title {
			// #dm_page_content & {
			// 	text-transform: none;
			// 	font-size: @fontSizeH3Px;
			// 	line-height: @gridBaseline;
			// 	//@getPxFontConfig(@fontSizeH3Px);
			// }
			// #dm_sidebar_left &, #dm_sidebar_right & {
			// 	text-transform: uppercase;
			// 	font-size: @fontSizeH4Px;
			// 	line-height: @gridBaseline;
			// 	//@getPxFontConfig(@fontSizeH4Px);
			// }
		}
	}
}

//placement des widgets dans le header
#dm_header {

	.dm_widget.content_gallery {
		float: left;
		margin-left: @gridGutter;

		//suppression marges internes
		ul, ol {
			margin: 0;
			padding: 0;
		}

		//suppression du float en mode édition
		#dm_page.edit & { float: none; }
	}
	
	.dm_widget.content_image {
		.isLess & { background-color: #D6B8C4; }
		float: left;

		//suppression du float en mode édition
		#dm_page.edit & { float: none; }
	}
	
	.dm_widget.content_ck_editor {
		.isLess & { background-color: #B8D6C1; }
		float: left;
		margin-left: @offM;

		//suppression du float et de la marge gauche en mode édition
		#dm_page.edit & { float: none; margin-left: 0; }
		
		.dm_widget_inner {
			color: @colorWhite;
			font-family: @fontGlobalFamilyWebFont;
			text-transform: uppercase;
			word-spacing: 0.125em;
			letter-spacing: 0.125em;
			padding-top: @gridBaseline/2;
			padding-bottom: @gridBaseline/2;
			
			//stylage des élements de titrage
			.dm_site_title, .dm_site_slogan { margin: 0; padding: 0; }
			.dm_site_title {
				.isLess & { background-color: #B6BFB9; }
				font-weight: bold;
				padding-bottom: @gridBaseline/2;
			}
			.dm_site_slogan {
				.isLess & { background-color: #ACBFB2; }
				padding-top: (@gridBaseline/2 -1px);
				border-top: 1px solid @colorWhite;
			}
		}
	}
}

//stylage par défaut des widgets dans les zones principales
#dm_page_content, #dm_sidebar_left, #dm_sidebar_right {
	.dm_widget {
		
		.dm_widget_inner {
			
			& > .title {
				margin-bottom: @gridBaseline/2;
				font-weight: normal;
				// word-spacing: 0.05em;
				// letter-spacing: 0.05em;
				//on supprime le décalage situé entre le titre et une liste d'éléments quand ils sont suivi l'un par l'autre
				& ~ .elements { margin-top: @gridBaseline/-2; }
			}
		}
	}
}

#dm_page_content {
	.dm_widget {
		margin-bottom: @gridBaseline;

		.dm_widget_inner {
			padding: @gridBaseline @gridGutter 0 @gridGutter;

			//on supprime le padding pour les sous-widgets
			.dm_widget_inner { padding: 0; }

			& > .title {
				.isLess & { background-color: fadeout(#528733, 25%); }
				background-color: @widgetTitleBgColor;
				color: @widgetTitleTextColor;
				text-transform: uppercase;
				padding-bottom: (@gridBaseline/2 -1px);
				border-bottom: 1px solid @colorZoneBorder;
			}
		}
	}
}

//stylage des widgets images pour la page d'accueil
#dm_page_content, #dm_sidebar_left, #dm_sidebar_right {
	.dm_widget.content_image_plus {
		.dm_widget_inner {
			padding: 0;
			& > .title { margin: 0; }
		}
	}
}

//pour le widget bidouille de contact
#dm_page_content, #dm_sidebar_left, #dm_sidebar_right {
	.dm_widget.content_ck_editor.contactSpecial {
		.dm_widget_inner {
			color: @colorCouleur1;
			font-size: @fontSizeH5Px;
			font-weight: bold;
			padding: @gridBaseline/2 @gridGutter/2;
			border: 0;
			@borderRadiusCompress(0);

			//image d'une hauteur de 43px
			img { padding: 1px 0; }

			.link {
				font-size: @fontSizeH5Px;
				font-weight: bold;
				&, &:visited, &:hover, &:focus, &:active { color: @colorCouleur1; }
			}
		}
	}
}

.dm_widget.adresses_siege_social {
	#dm_sidebar_right & {
		.dm_widget_inner {
			padding: @gridBaseline/2 @gridGutter/2;
			border: 0;
			@borderRadiusCompress(0);

			//changement du titrage
			& > .title {
				background-color: transparent;
				background-image: url(@{urlImagesAssets}/logo-label-ec.png);
				background-position: center center;
				background-repeat: no-repeat;

				//suppression du texte
				text-indent: -9999em;
				height: @gridBaseline*3;
				color: @colorCouleur3Fonce;
				padding: 0;
				//suppression des marges en compensation de la suppression de la bordure
				margin: (@gridBaseline/-2) (@gridGutter/-2) (@gridBaseline/2) (@gridGutter/-2);
				border-bottom: 0;
				@borderRadiusCompress(0);
			}

			//application d'un style sur le texte
			color: @colorCouleur1;
			font-size: @fontSizeH6Px;
			line-height: @gridBaseline;
			font-weight: bold;

			.link {
				font-size: @fontSizeH6Px;
				font-weight: bold;
				&, &:visited, &:hover, &:focus, &:active { color: @colorCouleur1; }
			}
		}

		//suppression sprites et labels par défaut
		.type {
			@spriteDelete();
			display: none;
			visibility: hidden;
			text-indent: inherit;
			padding: inherit;
			margin: inherit;
		}

		//on masque tout sauf l'email et le téléphone
		.itemprop {
			display: none;
			visibility: hidden;
			margin-bottom: @gridBaseline/2;
			
			&.email, &.telephone { display: block; visibility: visible; }
			//on réaffiche le label pour le téléphone
			&.telephone {
				.type, .separator { display: inline; visibility: visible; }
			}
		}
	}
}

#dm_sidebar_left, #dm_sidebar_right {
	.dm_widget {
		margin-bottom: @gridBaseline/2;

		.dm_widget_inner {
			padding: (@gridBaseline/2 - 1px) (@gridGutter/2 - 1px);
			//ajout d'une bordure dont l'épaisseur a été déduite
			border: 1px solid @colorZoneBorder;
			//ajout coin arrondi
			@borderRadiusTopLeftPie(@offL);

			//suppression bordures sous niveaux
			.dm_widget { margin-bottom: 0; .dm_widget_inner { padding: 0; border: 0; } }
			
			& > .title {
				background-color: @widgetTitleSpriteBgColor;
				color: @widgetTitleSpriteTextColor;
				margin: (@gridBaseline/-2 +1px) (@gridGutter/-2 +1px) (@gridBaseline/2) (@gridGutter/-2 +1px);
				padding: (@gridBaseline/2 - 1px) (@gridGutter/2 - 1px + @offS);
				border-bottom: 1px solid @colorZoneBorder;
				//ajout coin arrondi
				@borderRadiusTopLeftPie((@offL -1px));
			}
		}
	}
}

//couleur de fond des widgets à gauche (essentiellement le menu accordion)
#dm_sidebar_left {
	.dm_widget {
		.dm_widget_inner {
			background-color: @colorCouleur3ClairSup;
		}
	}
}