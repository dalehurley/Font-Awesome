// _SearchForm.less
// v1.7
// Last Updated : 2012-07-11 10:30
// Copyright : SID Presse
// Author : Arnaud GAUDIN

//Config par défaut des widgets du template
@import "_templates/operaTheme/Widgets/_Widgets.less";

//OPTIMISATION : n'inclure que les utilitaires réellement utilisés dans ce widget (cf dossiers Utilities)
@import "_framework/SPLessCss/Utilities/Css3/_Css3Border.less";
@import "_framework/SPLessCss/Utilities/Css3/_Css3Shadow.less";
@import "_framework/SPLessCss/Utilities/Css3/_Css3Transition.less";
@import "_framework/SPLessCss/Utilities/Grids/_GridsUtils.less";
@import "_framework/SPLessCss/Utilities/Sprites/_SpritesUtils.less";

//Importation de la mise en page par défaut du widget
@import "_framework/SPLessCss/Widgets/SearchForm/_SearchForm.less";

.dm_widget.search_form {
	.isLess & { background-color: fadeout(#BBF2F2, 75%); }

	//placement dans la zone située sous le header
	#dm_custom_top & {
		float: right;
		margin: 0 @gridPadding @gridBaseline/2 0;
	}
	
	.dm_widget_inner {
		.isLess & { background-color: fadeout(#8ED4D4, 75%); }

		//placement formulaire
		form {
			background-color: @widgetSearchFormBgColor;
			//application largeur
			@gridWidth(@gridCol_SidebarRight);
			margin: 0;
			padding: @gridBaseline/4 0;
			//ajout de la bordure arrondie
			@borderRadiusCompress(@offL);

			//Ajout transition sur la couleur de fond
			.csstransitions & {
				@transitionCompress(all; .2s; ease-out; 0s);
			}

			//ajout de la sprite avec l'icône de recherche
			&:before {
				position: relative;
				display: block;
				content: "";
				float: left;
				//décalage de marge
				@decalV: @gridBaseline - @spriteFormat_S;
				margin: @decalV 0 0 @offS;
				//chargement sprite entière avec dimension et SVG
				@spriteDefinition(@widgetSearchFormSpriteSearchTheme; @widgetSearchFormSpriteSearchCategory; @widgetSearchFormSpriteSearchName; "S"; @spriteFormat_S; @widgetSearchFormSpriteSearchOffX; @widgetSearchFormSpriteSearchOffY);
			}

			//classe CSS focus ajoutée en JS
			&.focus {
				background-color: @widgetSearcgFormBgFocusColor;
				
				//changement sprite au focus
				&:before{
					@spriteDefinition(@widgetSearchFormSpriteSearchFocusTheme; @widgetSearchFormSpriteSearchFocusCategory; @widgetSearchFormSpriteSearchFocusName; "S"; @spriteFormat_S; @widgetSearchFormSpriteSearchFocusOffX; @widgetSearchFormSpriteSearchFocusOffY);
				}
			}
		}

		//masquage du label et du bouton de validation
		.label, .submit { display: none; visibility: hidden; }
		
		//champ de saisie de la recherche
		.query {
			//suppression styles par défaut du champ
			&, &:focus, &:disabled, &:hover { background-color: @widgetSearchFormInputColor; }
			border: 0;
			//suppression outline parasite sous webkit
			outline: 0;

			.boxshadow & { &, &:focus, &:disabled { @boxShadowNone(); } }

			//placement et stylage de l'élément
			display: block;
			float: left;
			color: @widgetSearchFormTextColor;
			&:focus{ color: @widgetSearchFormTextFocusColor; }

			//ajustement du padding sans les bordures
			padding: 2px @offS 2px @offS;

			//application largeur
			@gridWidth(@gridCol_SidebarRight; @offS*2);
			//ajout du décalage à gauche si pseudo élément affiché
			.generatedcontent & {
				@gridWidth(@gridCol_SidebarRight; (@offS*3 + @spriteFormat_S));
			}

			//couleur des placeHolders
			//ciblage natif
			&::-webkit-input-placeholder { color: @widgetSearchFormTextColor; }
			&:-moz-placeholder { color: @widgetSearchFormTextColor; }
			//utilisé avec jQuery-placeholder
			&.placeholder { color: @widgetSearchFormTextColor; }
		}
	}
}