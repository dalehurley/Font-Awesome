// _SearchForm.less
// v1.0
// Last Updated : 2011-09-05 12:00
// Copyright : SID Presse
// Author : Arnaud GAUDIN

//Config par défaut des widgets du template
@import "_templates/BaseTheme/Widgets/_Widgets.less";

//OPTIMISATION : n'inclure que les utilitaires réellement utilisés dans ce widget (cf dossiers Utilities)
@import "_framework/SPLessCss/Utilities/Grids/_GridsUtils.less";
@import "_framework/SPLessCss/Utilities/Sprites/_SpritesUtils.less";
@import "_framework/SPLessCss/Utilities/Css3/_Css3Border.less";
@import "_framework/SPLessCss/Utilities/Css3/_Css3Shadow.less";

//Importation de la mise en page par défaut du widget
@import "_framework/SPLessCss/Widgets/SearchForm/_SearchForm.less";

#dm_header {
	.dm_widget.search_form {
		//permet d'étendre la zone en débordement de la page
		margin-left: -100%;
		margin-right: -100%;
		width: auto;
		margin-bottom: @gridBaseline;
		padding: 0;
		//hauteur imposée par le placement
		height: (@gridBaseline * 2 -1px);
		
		//ajout fond
		background-color: @colorCouleur2Fonce;
		//bordure de séparation
		border-bottom: 1px solid @colorCouleur3Clair;
		
		//positionnement (à décliner pour toutes les résolutions et à déplacer dans gestion grille)
		.dm_widget_inner {
			position: relative;
			@gridSiteWidth();
			margin-left: auto;
			margin-right: auto;
		}
		
		//placement formulaire
		form {
			position: relative;
			display: block;
			float: right;
			margin: 0;
		}
		
		//stylage du formulaire spécifique à la zone (refaire un style spécifique pour intégration dans contenu)
		label.label {
			display: none;
			visibility: hidden;
		}
		input.query {
			position: absolute;
			display: block;
			right: (@spriteFormat_S + @offM / 2 + 1px);
			border-color: @colorCouleur2FonceSup;
			background-color: @colorWhite;
			//padding horizontal soustrait à la largeur
			@padHSub: (@offS + 1px) * 2 + (@spriteFormat_S + @offM / 2 + 1px);
			//application largeur
			@gridWidth(@gridCol_SidebarRight; @padHSub);
			//réduction taille pour maintien baseline
			line-height: (@gridBaseline - 10px);		//on soustrait la différence de padding et de bordure (4*2 + 2)
			//placement sur deux lignes
			padding-top: 4px;
			padding-bottom: 3px;
			margin-top: (@gridBaseline - @gridBaseline/2 - 2px - 1px);
			margin-bottom: (@gridBaseline - @gridBaseline/2 - 2px);			//on enlève 1px à cause de la border-bottom de search_form
			//arrondissement des coins
			@borderRadiusCompress(@gridBaseline 0 0 @gridBaseline);
		}
		
		input.submit {
			position: absolute;
			display: block;
			right: 0;
			//suppression du dégradé
			&, .cssgradients & { background-color: @colorCouleur3Clair; }
			//changement couleur d'appui
			.boxshadow &:active { @insetShadow(0; 0; @offM; @offS; @colorCouleur3Sup); }
			//suppression texte
			text-indent: -9999em;
			//suppression bordure de gauche
			border-left: 0;
			//bordure sur le côté droit
			@borderRadiusCompress(0 @gridBaseline @gridBaseline 0);
			//ajout sprite de recherche
			@spriteDefinition("Default"; "internet"; "search"; "S"; @spriteFormat_S; @spriteOffX-internet-search; @spriteOffY-internet-search);
			//ajout différence d'épaisseur
			padding-top: (@gridBaseline - @spriteFormat_S) / 2 + 10px;
			padding-bottom: (@gridBaseline - @spriteFormat_S) / 2 + 8px;
			padding-left: @offM;
			padding-right: @offM + 2px;
			margin-top: (@gridBaseline - @gridBaseline/2 - 2px - 1px);
			margin-bottom: (@gridBaseline - @gridBaseline/2 - 2px);			//on enlève 1px à cause de la border-bottom de search_form
		}
		
		//suppression ajout jQueryMobile
		.ui-btn-text {
			display: none;
			visibility: hidden;
		}
	}
}

//hack webkit (Safari et Chrome)
@media screen and (-webkit-min-device-pixel-ratio:0) {
	#dm_header .dm_widget.search_form {
		//correction du bug sur le champ de saisi
		input.query { padding-bottom: 4px; }
		input.submit { padding-bottom: (@gridBaseline - @spriteFormat_S) / 2 + 9px; }
	}
}

//création des fonctions localisées de déclinaisons média
@templateMedia_TabletLandscape() {
	#dm_header {
		.dm_widget.search_form {
			//correction du bug sur le champ de saisi
			input.query { padding-bottom: 3px; }
			input.submit { padding-bottom: (@gridBaseline - @spriteFormat_S) / 2 + 8px; }
		}
	}
}

@templateMedia_TabletPortrait(){
	#dm_header {
		.dm_widget.search_form {
			.dm_widget_inner {
				@gridSiteWidth(@gridScreen_TabletPortrait; @gridCol_TabletPortrait; 0);
			}
			
			//correction du bug sur le champ de saisi
			input.query { padding-bottom: 3px; }
			input.submit { padding-bottom: (@gridBaseline - @spriteFormat_S) / 2 + 8px; }
		}
	}
}

//importation des requêtes média
@import "_framework/SPLessCss/Grids/Medias/_TabletLandscape.less";
@import "_framework/SPLessCss/Grids/Medias/_TabletPortrait.less";