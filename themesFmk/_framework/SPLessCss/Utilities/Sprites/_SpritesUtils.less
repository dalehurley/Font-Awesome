//_SpritesUtils.less
// v1.3
// Last Updated : 2012-01-18 12:15
// Copyright : SID Presse
// Author : Arnaud GAUDIN

//Importation du fichier des fonctions des sprites généré par le site du client
@import "_SpriteFunctions.less";

//Définition complète d'une sprite
@spriteDefinition(@theme: "Default"; @category; @name; @spriteFormat: "L"; @dim: @spriteFormat_L; @offX: 0; @offY: 0) {
	//appels des fonctions composants les sprites
	@spriteDimension(@dim);
	@spriteBgi(@theme; @spriteFormat);
	@spriteBgiSvg(@theme; @category; @name);
	@spriteBgp(@dim; @offX; @offY);
}

//Dimension de la sprite
@spriteDimension(@dim: @spriteFormat_L) { width: @dim * 1px; height: @dim * 1px; }

//Chargement de l'image de sprite assemblées
@spriteBgi(@theme: "Default"; @spriteFormat: "L";) { background-image: url(@{urlImagesClient}/Sprites/@{mainHashMd5}-@{theme}-@{spriteFormat}.png); background-repeat: no-repeat; }

//Chargement de l'icône SVG pour les navigateurs modernes
@spriteBgiSvg(@theme: "Default"; @category; @name) { .svg & { background-image: url(@{urlImagesClient}/Sprites/@{theme}/@{mainHashMd5}-@{category}-@{name}.svg); background-position: 0 0; } }

//Placement de l'arrière plan
@spriteBgp(@dim: @spriteFormat_L; @offX: 0; @offY: 0) { background-position: (@offX * @dim * -1px) (@offY * @dim * -1px); }


//fonction spécifique d'ajout de sprite au titre de widget
@widgetTitleSprite(@theme: "Default"; @category; @name) {
	//ciblage du titre du widget
	& .dm_widget_inner > .title {
		//que si l'élément :after est géré (éviter un mélange avec .svg), on rajoute de l'espace à gauche pour caler la sprite
		.generatedcontent #dm_sidebar_left &, .generatedcontent #dm_sidebar_right & { padding-left: (@spriteFormat_M + @zonesOffsetPad -1px); }
		
		&:after {
			position: absolute;
			display: block;
			//décalage de marge
			@decalV: (@gridBaseline + (@zonesOffsetPad -1px) * 2 - @spriteFormat_M) / 2;
			top: @decalV;
			left: 0;
			content: "";
			//appel différenciées des fonctions de sprite (appeler @spriteBgp-XXXX-XXXX-M dans le widget)
			@spriteDimension(@spriteFormat_M);
			@spriteBgi(@theme; "M");
			@spriteBgiSvg(@theme; @category; @name);
		}
	}
}