// NavigationMenu.less
// v1.2
// Last Updated : 2012-01-18 11:10
// Copyright : SID Presse
// Author : Arnaud GAUDIN

//Config par défaut des widgets du template
@import "_templates/BaseTheme/Widgets/_Widgets.less";

//OPTIMISATION : n'inclure que les utilitaires réellement utilisés dans ce widget (cf dossiers Utilities)
@import "_framework/SPLessCss/Utilities/Grids/_GridsUtils.less";
@import "_framework/SPLessCss/Utilities/Css3/_Css3Shadow.less";
@import "_framework/SPLessCss/Utilities/Css3/_Css3Transform2D.less";
@import "_framework/SPLessCss/Utilities/Css3/_Css3Transition.less";

//Config du widget courant
@import "_templates/BaseTheme/Widgets/NavigationMenu/_ConfigWidgetNavigationMenu.less";

//Importation de la mise en page par défaut du widget
@import "_framework/SPLessCss/Widgets/NavigationMenu/_NavigationMenu.less";

//personnalisation du widget par rapport à la zone contenante
.navigation_menu {
	margin: 0;
	
	//suppression bordure et padding
	#dm_content &, #dm_sidebar_left &, #dm_sidebar_right & {
		.dm_widget_inner {
			border: 0;
			padding: 0 0 @zonesOffsetPad 0;
			background-color: transparent;
		}
	}
	
	//Mise en page et themage personnalisé du menu de navigation dans la zone du header
	#dm_custom_top & {
		//permet d'étendre la zone en débordement de la page
		margin-left: -100%;
		margin-right: -100%;
		//rajout décalage en dessous
		//margin-bottom: @gridBaseline;
		//dégradé vertical en fond
		//@verticalGradient(@colorCouleur2Clair; @colorCouleur2);
		background-color: @colorCouleur2;
		
		//positionnement (à décliner pour toutes les résolutions et à déplacer dans gestion grille)
		.dm_widget_inner {
			position: relative;
			@gridSiteWidth();
			margin-left: auto;
			margin-right: auto;
		}
		
		//replacement normal du menu contenant les icônes (à améliorer en l'intégrant dans le choix du type de menu)
		&.menuSprites {
			float: left;
			@gridWidth(@gridCol_SidebarLeft);
			min-height: @gridBaseline * 2;
			margin-left: 0;
			margin-right: @gridGutter;
			margin-bottom: 0;
			background-color: transparent;
			.isLess & { background-color: lightblue; }
			
			.dm_widget_inner {
				margin-left: 0;
				margin-right: 0;
				width: 100%;
			}
			
			ul.default {
				li {
					display: block;
					float: right;
					//décalage de padding
					@decalV: (@gridBaseline - @spriteFormat_S) / 2;
					@decalH: (@gridGutter - @spriteFormat_S) / 2;
					padding: @decalV @decalH;
					//décalage de marge (pour avoir un décalage d'une demi-colonne)
					@decalHCol: (@gridColWidth/2 - @gridGutter);
					margin-left: @decalHCol;
					//on supprime le décalage à gauche pour le dernier et une icone sur 5 (à adapter si changement taille sidebar-left)
					&.last, &:nth-child(5) { margin-left: 0; }
				}
				
				.link {
					display: block;
					border:0;
					text-indent:-9999em;
					outline: 0;
					
					//chargement thème de sprite
					@spriteDimension(@spriteFormat_S);
					@spriteBgi("Default"; "S");
					
					&.link_accueil {
						@spriteBgiSvg("Default"; "internet"; "home");
						@spriteBgp(@spriteFormat_S; @spriteOffX-internet-home; @spriteOffY-internet-home);
					}
					
					&.link_contact {
						@spriteBgiSvg("Default"; "internet"; "email");
						@spriteBgp(@spriteFormat_S; @spriteOffX-internet-email; @spriteOffY-internet-email);
						&:hover {
							@spriteBgiSvg("Default"; "internet"; "emailOpen");
							@spriteBgp(@spriteFormat_S; @spriteOffX-internet-emailOpen; @spriteOffY-internet-emailOpen);
						}
					}
					
					&.link_facebook {
						@spriteBgiSvg("Default"; "socialnetwork"; "facebook");
						@spriteBgp(@spriteFormat_S; @spriteOffX-socialnetwork-facebook; @spriteOffY-socialnetwork-facebook);
					}
					&.link_google-plus {
						@spriteBgiSvg("Default"; "socialnetwork"; "googleplus");
						@spriteBgp(@spriteFormat_S; @spriteOffX-socialnetwork-googleplus; @spriteOffY-socialnetwork-googleplus);
					}
					&.link_linkedin {
						@spriteBgiSvg("Default"; "socialnetwork"; "linkedin");
						@spriteBgp(@spriteFormat_S; @spriteOffX-socialnetwork-linkedin; @spriteOffY-socialnetwork-linkedin);
					}
					&.link_twitter {
						@spriteBgiSvg("Default"; "socialnetwork"; "twitter");
						@spriteBgp(@spriteFormat_S; @spriteOffX-socialnetwork-twitter; @spriteOffY-socialnetwork-twitter);
					}
				}
			}
		}
	}
}

ul.dropdown, ul.accordion {
	//gestion grosseur texte
	li {
		font-weight: bold;
		text-transform: uppercase;
		word-spacing: -0.05em;
		letter-spacing: -0.05em;
	}
	ul li {
		font-weight: normal;
		text-transform: none;
	}
	
	//gestion des liens
	.link {
		background-color: @colorCouleur3ClairSup;
		//padding: @menuDropdownPadV @menuDropdownPadH @menuDropdownPadV @gridGutter;
		padding: (@menuDropdownPadV + 1px) @menuDropdownPadH @menuDropdownPadV (@menuDropdownPadH + 1px);
		border-style: solid;
		//border-width: 1px 1px 1px 0;
		//border-color: @colorCouleur3ClairSup @colorCouleur3MoyenSup @colorCouleur3MoyenSup @colorCouleur3MoyenSup;
		border-width: 0 1px 1px 0;
		border-color: @zonesBorderColor;
		//border-color: yellow red blue orange;
		color: @colorCouleur3Fonce;
		text-decoration: none;
		outline: 0;
		cursor: pointer;
		
		//changement taille selon zone
		#dm_custom_top & { font-size: @fontGlobalSizePx; }
		#dm_sidebar_left &, #dm_sidebar_right & { font-size: @fontSizeSmall; }
		
		&.dm_current { &, &:hover { color: @colorCouleur1; } }
		&.dm_inactive { color: @colorCouleur3; }
		//LoVe's Hurts Fade Away
		&:hover, &:focus { color: @colorCouleur3FonceSup; background-color: @colorCouleur3Clair; }
		&:active { color: @colorCouleur1Moyen; }
		
		//ajout des transitions pour navigateurs récents
		.csstransitions & {
			@transitionCompress(background-color, color; .2s; ease-in-out; 0);
		}
	}
	
	li {
		//création de la flèche avec des bordures
		&.dm_dir > .link {
			&:after {
				position: absolute;
				z-index: 250;
				display: block;
				content:"";
				width: 0;
				height: 0;
				right: @menuArrowOffsetX;
				top: @menuArrowOffsetY;
				//border-color: transparent transparent transparent @menuDropdownArrowColor;
				border-color: transparent;
				border-style: solid;
				border-width: @menuArrowDim;
				
				//ajout des transitions pour navigateurs récents
				.csstransitions.csstransforms & {
					@transitionCompress(all; .15s; ease-in; 0);
					@origin(25%; 50%);
				}
				
				//inversion de style automatique en fonction du conteneur
				#dm_sidebar_right & {
					right: auto !important;
					left: @menuArrowOffsetX;
					//border-color: transparent @menuDropdownArrowColor transparent transparent;
					
					.csstransitions.csstransforms & {
						@origin(75%; 50%);
					}
				}
			}
		}
	}
}

//comportement flèche différents selon les types de menu
ul.dropdown li.dm_dir > .link:hover:after,
ul.dropdown li.dm_dir:hover > .link:after,
ul.accordion li.dm_parent > .link:after {
	right: @menuArrowOffsetX + @menuArrowDecal;
	top: @menuArrowOffsetY + @menuArrowDecal;
	//border-color: @menuDropdownArrowColorSup transparent transparent transparent;
	
	//ajout des transitions pour navigateurs récents
	.csstransitions.csstransforms & {
		right: @menuArrowOffsetX;
		top: @menuArrowOffsetY;
		//border-color: transparent transparent transparent @menuDropdownArrowColorSup;
		@rotate(90deg);
	}
	
	//inversion de style automatique en fonction du conteneur
	#dm_sidebar_right & {
		right: auto !important;
		left: @menuArrowOffsetX + @menuArrowDecal;
		
		.csstransitions.csstransforms & {
			left: @menuArrowOffsetX;
			//border-color: transparent @menuDropdownArrowColorSup transparent transparent;
			@rotate(-90deg);
		}
	}
}

//mise en couleur des cellules ouvertes
ul.dropdown li.dm_dir:hover > .link,
#dm_custom_top .navigation_menu ul.dropdown li.dm_dir:hover > .link,
ul.accordion li.dm_parent > .link,
ul.accordion li.dm_parent li.dm_parent > .link {
	background-color: @colorCouleur1;
	color: @colorCouleur3Clair;
	&:hover { color: @colorCouleur3ClairSup; }
}

//création des fonctions localisées de déclinaisons média
@templateMedia_TabletPortrait(){
	#dm_custom_top {
		.navigation_menu {
			.dm_widget_inner {
				@gridSiteWidth(@gridScreen_TabletPortrait; @gridCol_TabletPortrait; 0);
			}
		}
	}
}

//importation des requêtes média
@import "_framework/SPLessCss/Grids/Medias/_TabletPortrait.less";